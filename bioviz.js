!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3")):"function"==typeof define&&define.amd?define(["d3"],e):"object"==typeof exports?exports.bioviz=e(require("d3")):t.bioviz=e(t[void 0])}(window,(function(t){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(e,i){e.exports=t},function(t,e,i){"use strict";i.r(e),i.d(e,"Compliance",(function(){return R}));var n=i(0),o={show:!0,strokeColor:"#000",strokeWidth:2};function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){c(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var a={line:r(r({},o),{show:!1}),text:r(r({},{fill:"black","text-anchor":"middle","font-size":12,font:"Open Sans, Sans serif","font-weight":700}),{show:!0})},l={cont:{id:"App",size:{}},chart:{type:"XYChart",size:{}},title:{},svg:{},dimensions:{},measures:{},color:{show:!0,range:n.schemeCategory10},markers:{shape:"rect"},xAxis:{show:!0,orient:"horizontal",position:"bottom",range:[0,500],padding:.1,line:o,ticks:a},yAxis:{show:!0,orient:"vertical",position:"left",range:[0,500],padding:.1,line:o,ticks:a}};function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),console.log(e),this.range=e.range,this.values=e.values,this.orient=e.orient,this.position=e.position,this.padding=e.padding,this.scale=this.getScale(),this.axisType=this.getAxisType(),this.axis=this.getAxis()}var e,i,o;return e=t,(i=[{key:"getScale",value:function(){return Object(n.scaleBand)().padding(this.padding).domain(this.values).range(this.range)}},{key:"getAxisType",value:function(){return"horizontal"==this.orient&&"bottom"==this.position?Object(n.axisBottom)():"horizontal"==this.orient&&"top"==this.position?Object(n.axisTop)():"vertical"==this.orient&&"left"==this.position?Object(n.axisLeft)():"vertical"==this.orient&&"right"==this.position?Object(n.axisRight)():Object(n.axisLeft)()}},{key:"getAxis",value:function(){return this.axisType.scale(this.scale)}}])&&f(e.prototype,i),o&&f(e,o),t}(),u={removeLine:function(t){t.select(".domain").remove()},removeTicks:function(t){t.selectAll(".tick line").remove()},removeText:function(t){t.selectAll(".tick text").remove()}},g={};function p(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}g.applyAttrs=function(t,e){return Object.keys(e).map((function(i){t.attr(i,e[i])})),"success"};var y=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.range=e.range,this.values=e.values,this.padding=e.padding,this.scale=this.getScale()}var e,i,o;return e=t,(i=[{key:"getScale",value:function(){return Object(n.scaleOrdinal)().domain(this.values).range(this.range)}}])&&p(e.prototype,i),o&&p(e,o),t}(),d={fill:"black",stroke:"black","stroke-width":2,rx:5,ry:5,"fill-opacity":1,opacity:1};function x(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function v(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?x(Object(i),!0).forEach((function(e){b(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function b(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function m(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var A=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.xAxis=this.getAxis("xAxis",e),this.yAxis=this.getAxis("yAxis",e),this.colorScale=this.getAxis("color",e),this.initialize(e),this.update(e)}var e,i,o;return e=t,(i=[{key:"getAxis",value:function(t,e){var i;switch(t){case"xAxis":return i=v(v({},l.xAxis),e.xAxis),new h(i);case"yAxis":return i=v(v({},l.yAxis),e.yAxis),new h(i);case"color":return i=v(v({},l.color),e.color),new y(i)}}},{key:"formatData",value:function(t){t.formattedData=n.nest().key((function(e){return e[t.xAxis.dimension]})).key((function(e){return e[t.yAxis.dimension]})).rollup((function(t){return t[0]})).entries(t.data)}},{key:"formatAxes",value:function(t){t.xAxis.line=v(v({},l.xAxis.line),t.xAxis.line),t.yAxis.line=v(v({},l.yAxis.line),t.yAxis.line),t.xAxis.ticks=v(v({},l.xAxis.ticks),t.xAxis.ticks),t.yAxis.ticks=v(v({},l.yAxis.ticks),t.yAxis.ticks),t.xAxis.show&&(t.xAxis.line.show||u.removeLine(t.xAxis.el),t.xAxis.ticks.line.show||u.removeTicks(t.xAxis.el),t.xAxis.ticks.text.show||u.removeText(t.xAxis.el),t.xAxis.ticks.text.show&&t.xAxis.el.selectAll(".tick text").attr("data-attrs",(function(e){return g.applyAttrs(n.select(this),t.xAxis.ticks.text)}))),t.yAxis.show&&(t.yAxis.line.show||u.removeLine(t.yAxis.el),t.yAxis.ticks.line.show||u.removeTicks(t.yAxis.el),t.yAxis.ticks.text.show||u.removeText(t.yAxis.el),t.yAxis.ticks.text.show&&t.yAxis.el.selectAll(".tick text").attr("data-attrs",(function(e){return g.applyAttrs(n.select(this),t.xAxis.ticks.text)})))}},{key:"update",value:function(t){var e=this;this.formatData(t),t.markers=v(v({},t.markers),d),t.xAxis.show&&this.svg.select("#x-axis").call(this.xAxis.axis),t.yAxis.show&&this.svg.select("#y-axis").call(this.yAxis.axis),this.svg.select("#markers-group").selectAll("g").data(t.formattedData).enter().append("g").attr("class",(function(t){return"".concat(t.key)})).attr("id",(function(t){return"group-".concat(t.key)})),this.svg.select("#markers-group").selectAll("g").data(t.formattedData).exit().remove();var i=this.svg.select("#markers-group").selectAll("g");i.selectAll("rect").data((function(t){return t.values})).enter().append("rect"),i.selectAll("rect").data((function(t){return t.values})).exit().remove(),i.selectAll("rect").attr("x",(function(i){return e.xAxis.scale(i.value[t.xAxis.dimension])})).attr("y",(function(i){return e.yAxis.scale(i.value[t.yAxis.dimension])})).attr("width",this.xAxis.scale.bandwidth()).attr("height",this.yAxis.scale.bandwidth()).attr("data-attrs",(function(e){return g.applyAttrs(n.select(this),t.markers)})),t.color.show&&i.selectAll("rect").attr("fill",(function(i){return e.colorScale.scale(i.value[t.color.dimension])})),this.formatAxes(t)}},{key:"initialize",value:function(t){this.chart=n.select("#".concat(t.chart.id)),this.svg=t.svg.el.attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 ".concat(t.svg.size.width," ").concat(t.svg.size.height)),t.xAxis.el=this.svg.append("g").attr("class","x-axis axes").attr("id","x-axis").attr("transform","translate(0,".concat(t.display.size.height,")")),t.yAxis.el=this.svg.append("g").attr("class","y-axis axes").attr("id","y-axis").attr("transform","translate(".concat(t.display.margin.left,",0)")),this.svg.append("g").attr("class","markers").attr("id","markers-group")}}])&&m(e.prototype,i),o&&m(e,o),t}(),w={},O={margin:{top:10,right:10,bottom:10,left:10}},k={margin:{top:10,right:10,bottom:10,left:10}};function j(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function P(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?j(Object(i),!0).forEach((function(e){C(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):j(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function C(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function z(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=L(t);if(e){var o=L(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return E(this,i)}}function E(t,e){return!e||"object"!==S(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(i,t);var e=_(i);function i(){return D(this,i),e.apply(this,arguments)}return i}(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=P(P({},l),e),this.parseConfig(),this.plotChart()}var e,i,o;return e=t,(i=[{key:"setLayout",value:function(){this.config.title.el=this.config.cont.el.append("div").attr("class","bv-title").attr("id",this.config.title.id).style("width","".concat(this.config.cont.size.width,"px")).style("height","75px"),this.config.chart.el=this.config.cont.el.append("div").attr("class","bv-chart").attr("id",this.config.chart.id).style("width","100%").style("height","".concat(this.config.chart.size.height,"px")),this.config.legend.el=this.config.cont.el.append("div").attr("class","bv-legend").attr("id",this.config.legend.id).style("width","".concat(this.config.cont.size.width,"px")).style("height","75px"),this.config.svg.el=this.config.chart.el.append("svg").attr("class","bv-chart-svg").attr("id",this.config.svg.id)}},{key:"parseContConfig",value:function(){this.config.cont=P(P({},l.cont),this.config.cont),this.config.cont.el=n.select("#".concat(this.config.cont.id)),this.config.cont.size={width:this.config.cont.size.width||this.config.cont.el.node().offsetWidth,height:this.config.cont.size.height||this.config.cont.el.node().offsetHeight}}},{key:"parseTitleConfig",value:function(){this.config.title=P(P({},l.title),this.config.title),this.config.title.id=this.config.title.id||"".concat(this.config.cont.id,"-title")}},{key:"parseLegendConfig",value:function(){this.config.legend=P(P({},l.legend),this.config.legend),this.config.legend.id=this.config.legend.id||"".concat(this.config.cont.id,"-legend")}},{key:"parseChartConfig",value:function(){this.config.chart=P(P({},w),this.config.chart),this.config.chart.id=this.config.chart.id||"".concat(this.config.cont.id,"-chart"),this.config.chart.size={width:this.config.cont.size.width||this.config.cont.el.node().offsetWidth,height:(this.config.cont.size.height||this.config.cont.el.node().offsetHeight)-150}}},{key:"parseSVGConfig",value:function(){this.config.svg=P(P({},O),this.config.svg),this.config.svg.id=this.config.svg.id||"".concat(this.config.cont.id,"-svg"),this.config.svg.size={width:this.config.chart.size.width||this.config.chart.el.node().offsetWidth,height:this.config.chart.size.height||this.config.chart.el.node().offsetHeight},this.config.display=P(P({},k),this.config.display),this.config.display.size={width:this.config.svg.size.width-this.config.display.margin.left-this.config.display.margin.right,height:this.config.svg.size.height-this.config.display.margin.top-this.config.display.margin.bottom}}},{key:"fetchDistinctValues",value:function(t){return Array.from(new Set(this.config.data.map((function(e){return e[t]}))))}},{key:"parsexAxisConfig",value:function(){this.config.xAxis=P(P({},l.xAxis),this.config.xAxis),this.config.xAxis.range=[this.config.display.margin.left,this.config.display.size.width-this.config.display.margin.right],this.config.xAxis.dimension=this.config.xAxis.dimension||this.config.dimensions[0],this.config.xAxis.values=this.config.xAxis.values||this.fetchDistinctValues(this.config.xAxis.dimension)}},{key:"parseyAxisConfig",value:function(){this.config.yAxis=P(P({},l.yAxis),this.config.yAxis),this.config.yAxis.range=[this.config.display.size.height-this.config.display.margin.bottom,this.config.display.margin.top],this.config.yAxis.dimension=this.config.yAxis.dimension||this.config.dimensions[1],this.config.yAxis.values=this.config.yAxis.values||this.fetchDistinctValues(this.config.yAxis.dimension)}},{key:"parseColorConfig",value:function(){this.config.color=P(P({},l.color),this.config.color),this.config.color.dimension=this.config.color.dimension||this.config.color[0],this.config.color.values=this.config.color.values||this.fetchDistinctValues(this.config.color.dimension)}},{key:"parseConfig",value:function(){this.parseContConfig(),this.parseChartConfig(),this.parseTitleConfig(),this.parseLegendConfig(),this.setLayout(),this.parseSVGConfig()}},{key:"plotChart",value:function(){switch(this.config.chart.type){case"XYChart":this.parsexAxisConfig(),this.parseyAxisConfig(),this.parseColorConfig(),this.chart=new A(this.config)}}}])&&z(e.prototype,i),o&&z(e,o),t}())}])}));